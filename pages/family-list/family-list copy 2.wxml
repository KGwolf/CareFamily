<navigation-bar title="我的家人" back="{{false}}" color="black" background="#FFF"></navigation-bar>
<!-- 页面容器 -->
<view class="page-container">
  <!-- 顶部信息栏 -->
  <view class="top-bar">
    <text class="page-title">我的家人</text>
    <text class="family-count">共 {{familyList.length}} 位家人</text>
  </view>

  <!-- 家人列表容器 -->
  <view class="family-list">
    <!-- 家人卡片（循环渲染 + 滑动事件） -->
    <block wx:for="{{familyList}}" wx:key="id">
      <view class="slide-wrap" data-index="{{index}}">
        <!-- 操作栏（右侧隐藏，统一rpx尺寸） -->
        <view class="action-bar">
          <view class="action-btn edit" bindtap="handleEdit" data-item="{{item}}">
            <text class="action-text">编辑</text>
          </view>
          <view class="action-btn add-tip" bindtap="handleAddTip" data-item="{{item}}">
            <text class="action-text">添加提醒</text>
          </view>
          <view class="action-btn delete" bindtap="handleDelete" data-index="{{index}}" data-item="{{item}}">
            <text class="action-text">删除</text>
          </view>
        </view>
        <!-- 家人卡片（主内容，绑定触摸事件） -->
        <view 
          class="family-card"
          style="transform: translateX({{slideOffset[index]}}rpx)"
          bindtouchstart="handleTouchStart"
          bindtouchmove="handleTouchMove"
          bindtouchend="handleTouchEnd"
          data-index="{{index}}"
        >
          <!-- 头像（默认占位+性别区分） -->
          <view class="avatar-wrap" style="background-color: {{item.gender === '男' ? '#e1f5fe' : '#ffebee'}}">
            <text class="avatar-text">{{item.name[0]}}</text>
          </view>
          <!-- 信息区域 -->
          <view class="info-wrap">
            <text class="family-name">{{item.name}}</text>
            <view class="sub-info">
              <text class="age-text">{{item.age}}岁</text>
              <text class="relation-tag">{{item.relation || (item.gender === '男' ? '长辈' : '长辈')}}</text>
            </view>
          </view>
          <!-- 滑动提示箭头 -->
          <view class="slide-arrow">
            <icon type="arrowright" size="20" color="#ccc"></icon>
          </view>
        </view>
      </view>
    </block>

    <!-- 空列表提示（无家人时显示） -->
    <block wx:if="{{familyList.length === 0}}">
      <view class="empty-tip">
        <image class="empty-icon" src="/images/empty_family.png" mode="aspectFit"></image>
        <text class="empty-text">还没有添加家人哦</text>
      </view>
    </block>
  </view>

  <!-- 悬浮添加按钮 -->
  <view class="add-btn" bindtap="handleAddFamily">
    <text class="add-btn-text">+</text>
  </view>
</view>